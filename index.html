<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Permit Automation System - Architecture Guide</title>
    <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
    <style>
        :root {
            /* Futuristic Cyan/Teal Palette */
            --cyan-50: #ecfeff;
            --cyan-100: #cffafe;
            --cyan-200: #a5f3fc;
            --cyan-300: #67e8f9;
            --cyan-400: #22d3ee;
            --cyan-500: #06b6d4;
            --cyan-600: #0891b2;
            --cyan-700: #0e7490;
            --cyan-800: #155e75;
            --cyan-900: #164e63;

            /* Warm Coral Accent */
            --coral-50: #fff5f5;
            --coral-100: #ffe3e3;
            --coral-200: #ffc9c9;
            --coral-300: #ffa8a8;
            --coral-400: #ff8787;
            --coral-500: #ff6b6b;
            --coral-600: #fa5252;
            --coral-700: #f03e3e;

            /* Electric Orange */
            --orange-50: #fff8f1;
            --orange-100: #ffedd5;
            --orange-400: #fb923c;
            --orange-500: #f97316;
            --orange-600: #ea580c;

            /* Mint/Teal Success */
            --mint-50: #f0fdfa;
            --mint-100: #ccfbf1;
            --mint-200: #99f6e4;
            --mint-500: #14b8a6;
            --mint-600: #0d9488;
            --mint-700: #0f766e;

            /* Neutral Cream/Gray */
            --cream-50: #fefdfb;
            --cream-100: #faf9f7;
            --cream-200: #f5f3f0;

            --gray-50: #f9fafb;
            --gray-100: #f3f4f6;
            --gray-200: #e5e7eb;
            --gray-300: #d1d5db;
            --gray-400: #9ca3af;
            --gray-500: #6b7280;
            --gray-600: #4b5563;
            --gray-700: #374151;
            --gray-800: #1f2937;
            --gray-900: #111827;

            /* Gradients */
            --gradient-cyan: linear-gradient(135deg, var(--cyan-400) 0%, var(--cyan-600) 100%);
            --gradient-coral: linear-gradient(135deg, var(--coral-400) 0%, var(--coral-600) 100%);
            --gradient-mint: linear-gradient(135deg, var(--mint-200) 0%, var(--mint-500) 100%);
            --gradient-hero: linear-gradient(135deg, var(--cyan-600) 0%, var(--cyan-800) 50%, var(--gray-900) 100%);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Space Grotesk', -apple-system, BlinkMacSystemFont, sans-serif;
            background: var(--cream-50);
            color: var(--gray-700);
            line-height: 1.7;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 24px;
        }

        /* Header */
        .header {
            background: var(--gradient-hero);
            padding: 80px 24px;
            color: white;
            position: relative;
            overflow: hidden;
        }

        .header::before {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background:
                radial-gradient(circle at 20% 80%, rgba(6, 182, 212, 0.3) 0%, transparent 50%),
                radial-gradient(circle at 80% 20%, rgba(255, 107, 107, 0.2) 0%, transparent 40%);
            pointer-events: none;
        }

        .header-content {
            max-width: 1200px;
            margin: 0 auto;
            position: relative;
            z-index: 1;
        }

        .header-badge {
            display: inline-block;
            background: rgba(255, 255, 255, 0.15);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            padding: 8px 16px;
            border-radius: 100px;
            font-size: 0.8rem;
            font-weight: 500;
            margin-bottom: 20px;
            letter-spacing: 0.05em;
        }

        .header h1 {
            font-size: 3rem;
            font-weight: 700;
            margin-bottom: 16px;
            letter-spacing: -0.02em;
        }

        .header .subtitle {
            font-size: 1.25rem;
            color: rgba(255, 255, 255, 0.8);
            max-width: 700px;
            line-height: 1.6;
        }

        /* Section */
        section {
            padding: 80px 0;
        }

        section h2 {
            font-size: 2rem;
            font-weight: 700;
            margin-bottom: 12px;
            color: var(--gray-800);
            letter-spacing: -0.01em;
        }

        section .section-desc {
            font-size: 1.1rem;
            color: var(--gray-500);
            margin-bottom: 40px;
            max-width: 700px;
        }

        .section-tag {
            display: inline-block;
            background: var(--cyan-100);
            color: var(--cyan-700);
            padding: 6px 14px;
            border-radius: 100px;
            font-size: 0.75rem;
            font-weight: 600;
            margin-bottom: 16px;
            letter-spacing: 0.05em;
            text-transform: uppercase;
        }

        /* Cards */
        .card {
            background: white;
            border-radius: 16px;
            border: 1px solid var(--gray-200);
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.04);
            transition: all 0.3s ease;
        }

        .card:hover {
            box-shadow: 0 8px 40px rgba(0, 0, 0, 0.08);
            transform: translateY(-2px);
        }

        /* Problem Section */
        .problem-section {
            background: linear-gradient(180deg, var(--coral-50) 0%, var(--cream-50) 100%);
        }

        .problem-section .section-tag {
            background: var(--coral-100);
            color: var(--coral-600);
        }

        .problem-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 20px;
        }

        .problem-card {
            background: white;
            border-radius: 16px;
            padding: 28px;
            border: 1px solid var(--coral-200);
            position: relative;
            overflow: hidden;
        }

        .problem-card::before {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: var(--gradient-coral);
        }

        .problem-card .icon {
            width: 52px;
            height: 52px;
            background: var(--coral-100);
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            margin-bottom: 18px;
        }

        .problem-card h3 {
            font-size: 1rem;
            font-weight: 600;
            color: var(--gray-800);
            margin-bottom: 10px;
        }

        .problem-card p {
            font-size: 0.9rem;
            color: var(--gray-500);
            line-height: 1.6;
        }

        /* Stakeholder Section */
        .stakeholder-section {
            background: white;
            border-bottom: 1px solid var(--gray-200);
        }

        .stakeholder-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 24px;
        }

        .stakeholder-card {
            background: var(--gray-50);
            border-radius: 16px;
            padding: 28px;
            border: 1px solid var(--gray-200);
        }

        .stakeholder-card h3 {
            font-size: 1.1rem;
            font-weight: 600;
            color: var(--gray-800);
            margin-bottom: 16px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .stakeholder-card h3 span {
            font-size: 1.25rem;
        }

        .stakeholder-card ul {
            list-style: none;
        }

        .stakeholder-card li {
            font-size: 0.9rem;
            color: var(--gray-600);
            padding: 8px 0;
            padding-left: 24px;
            position: relative;
        }

        .stakeholder-card li::before {
            content: "‚Üí";
            position: absolute;
            left: 0;
            color: var(--cyan-500);
            font-weight: 600;
        }

        /* OTC Data Table */
        .data-section {
            background: var(--cream-100);
        }

        .data-section .section-tag {
            background: var(--mint-100);
            color: var(--mint-700);
        }

        .data-table-wrapper {
            background: white;
            border-radius: 16px;
            overflow: hidden;
            border: 1px solid var(--gray-200);
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.04);
        }

        .data-table {
            width: 100%;
            border-collapse: collapse;
        }

        .data-table th {
            background: var(--cyan-600);
            color: white;
            padding: 16px 20px;
            text-align: left;
            font-size: 0.85rem;
            font-weight: 600;
            letter-spacing: 0.02em;
        }

        .data-table td {
            padding: 16px 20px;
            border-bottom: 1px solid var(--gray-100);
            font-size: 0.9rem;
            color: var(--gray-700);
        }

        .data-table tr:last-child td {
            border-bottom: none;
        }

        .data-table tr:hover td {
            background: var(--cyan-50);
        }

        .data-table .highlight-value {
            font-weight: 700;
            color: var(--cyan-700);
            font-size: 1.1rem;
        }

        .data-insight {
            background: var(--cyan-50);
            border: 1px solid var(--cyan-200);
            border-radius: 12px;
            padding: 20px 24px;
            margin-top: 24px;
        }

        .data-insight h4 {
            font-size: 0.9rem;
            font-weight: 600;
            color: var(--cyan-700);
            margin-bottom: 8px;
        }

        .data-insight p {
            font-size: 0.9rem;
            color: var(--gray-600);
            line-height: 1.6;
        }

        /* Scope Section */
        .scope-section {
            background: white;
            border-bottom: 1px solid var(--gray-200);
        }

        .scope-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 24px;
        }

        .scope-card {
            padding: 28px;
            border-radius: 16px;
        }

        .scope-card.included {
            background: var(--mint-50);
            border: 2px solid var(--mint-200);
        }

        .scope-card.excluded {
            background: var(--gray-100);
            border: 2px solid var(--gray-200);
        }

        .scope-card h3 {
            font-size: 1.1rem;
            font-weight: 600;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .scope-card.included h3 { color: var(--mint-700); }
        .scope-card.excluded h3 { color: var(--gray-500); }

        .scope-list {
            list-style: none;
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
        }

        .scope-list li {
            font-size: 0.9rem;
            padding: 12px 14px;
            background: white;
            border-radius: 10px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .scope-card.included .scope-list li::before {
            content: "‚úì";
            color: var(--mint-500);
            font-weight: 700;
        }

        .scope-card.excluded .scope-list li::before {
            content: "‚úó";
            color: var(--gray-400);
        }

        .scope-card.excluded .scope-list li {
            color: var(--gray-500);
        }

        .scope-why {
            background: var(--cyan-50);
            border: 1px solid var(--cyan-200);
            border-radius: 12px;
            padding: 24px;
            margin-top: 32px;
        }

        .scope-why h4 {
            font-size: 1rem;
            font-weight: 600;
            color: var(--cyan-700);
            margin-bottom: 16px;
        }

        .scope-why-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 16px;
        }

        .scope-why-item {
            text-align: center;
        }

        .scope-why-item .number {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--cyan-600);
        }

        .scope-why-item .label {
            font-size: 0.8rem;
            color: var(--gray-600);
            margin-top: 4px;
        }

        /* Current Problems Section */
        .current-problems {
            background: linear-gradient(180deg, var(--orange-50) 0%, var(--cream-50) 100%);
        }

        .current-problems .section-tag {
            background: var(--orange-100);
            color: var(--orange-600);
        }

        .current-problems h2 {
            color: var(--orange-600);
        }

        .problem-diagram {
            background: white;
            border-radius: 20px;
            padding: 40px;
            border: 2px solid var(--orange-200);
            box-shadow: 0 4px 30px rgba(249, 115, 22, 0.1);
        }

        .current-arch {
            display: flex;
            flex-direction: column;
            gap: 24px;
        }

        .current-arch-row {
            display: flex;
            align-items: center;
            gap: 16px;
        }

        .arch-box {
            padding: 20px 28px;
            border-radius: 12px;
            text-align: center;
            min-width: 160px;
        }

        .arch-box.user {
            background: var(--cyan-100);
            border: 2px solid var(--cyan-300);
        }

        .arch-box.chat {
            background: var(--gray-100);
            border: 2px solid var(--gray-300);
        }

        .arch-box.dag {
            background: var(--orange-100);
            border: 2px dashed var(--orange-400);
        }

        .arch-box h4 {
            font-size: 0.95rem;
            font-weight: 600;
            color: var(--gray-700);
        }

        .arch-box p {
            font-size: 0.8rem;
            color: var(--gray-500);
            margin-top: 6px;
        }

        .arch-arrow {
            color: var(--gray-400);
            font-size: 24px;
            font-weight: 300;
        }

        .dag-agents {
            display: flex;
            gap: 12px;
            flex-wrap: wrap;
        }

        .dag-agent {
            background: var(--orange-100);
            border: 2px dashed var(--orange-400);
            border-radius: 10px;
            padding: 14px 18px;
            font-size: 0.85rem;
            font-weight: 500;
            color: var(--orange-700);
        }

        .issues-list {
            margin-top: 36px;
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 20px;
        }

        .issue-item {
            background: linear-gradient(135deg, var(--coral-50) 0%, white 100%);
            border: 1px solid var(--coral-200);
            border-radius: 14px;
            padding: 20px 24px;
            display: flex;
            gap: 16px;
        }

        .issue-item .issue-icon {
            width: 40px;
            height: 40px;
            background: var(--coral-100);
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
            font-size: 18px;
        }

        .issue-item h4 {
            font-size: 0.95rem;
            font-weight: 600;
            color: var(--coral-700);
            margin-bottom: 6px;
        }

        .issue-item p {
            font-size: 0.85rem;
            color: var(--gray-600);
            line-height: 1.5;
        }

        /* New Architecture Section */
        .new-arch-section {
            background: linear-gradient(180deg, var(--mint-50) 0%, white 100%);
        }

        .new-arch-section .section-tag {
            background: var(--mint-100);
            color: var(--mint-700);
        }

        .new-arch-section h2 {
            color: var(--mint-700);
        }

        .architecture-diagram {
            background: white;
            border-radius: 20px;
            padding: 48px;
            border: 2px solid var(--mint-200);
            box-shadow: 0 8px 40px rgba(20, 184, 166, 0.1);
        }

        .layer-stack {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .layer {
            border-radius: 16px;
            overflow: hidden;
            border: 1px solid var(--gray-200);
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.04);
        }

        .layer-header {
            padding: 18px 28px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            color: white;
        }

        .layer-header h3 {
            font-size: 1.05rem;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .layer-header .layer-tag {
            font-size: 0.7rem;
            padding: 5px 12px;
            background: rgba(255,255,255,0.2);
            border-radius: 100px;
            font-weight: 500;
            letter-spacing: 0.03em;
        }

        .layer.layer-1 .layer-header { background: var(--gradient-cyan); }
        .layer.layer-2 .layer-header { background: linear-gradient(135deg, var(--orange-400) 0%, var(--orange-600) 100%); }
        .layer.layer-3 .layer-header { background: linear-gradient(135deg, var(--mint-500) 0%, var(--mint-600) 100%); }
        .layer.layer-db .layer-header { background: linear-gradient(135deg, var(--gray-600) 0%, var(--gray-800) 100%); }

        .layer-content {
            padding: 28px;
            background: var(--gray-50);
        }

        .layer-components {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 16px;
        }

        .component {
            background: white;
            border-radius: 12px;
            padding: 20px;
            border: 1px solid var(--gray-200);
        }

        .component h4 {
            font-size: 0.9rem;
            font-weight: 600;
            color: var(--gray-700);
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .component p {
            font-size: 0.8rem;
            color: var(--gray-500);
            line-height: 1.5;
        }

        .component-icon {
            font-size: 16px;
        }

        .layer-connection {
            display: flex;
            justify-content: center;
            padding: 12px 0;
        }

        .connection-arrow {
            display: flex;
            flex-direction: column;
            align-items: center;
            color: var(--gray-400);
        }

        .connection-arrow span {
            font-size: 0.75rem;
            color: var(--gray-500);
            margin-bottom: 6px;
            font-weight: 500;
        }

        .connection-arrow svg {
            width: 28px;
            height: 28px;
        }

        /* Insight Box */
        .insight-box {
            margin-top: 20px;
            padding: 16px 20px;
            border-radius: 12px;
            font-size: 0.85rem;
            line-height: 1.5;
        }

        .insight-box.cyan {
            background: var(--cyan-50);
            border: 1px solid var(--cyan-200);
            color: var(--cyan-700);
        }

        .insight-box.orange {
            background: var(--orange-50);
            border: 1px solid var(--orange-200);
            color: var(--orange-700);
        }

        .insight-box.mint {
            background: var(--mint-50);
            border: 1px solid var(--mint-200);
            color: var(--mint-700);
        }

        .insight-box strong {
            font-weight: 600;
        }

        /* Layer 1 Detail Section */
        .layer1-detail-section {
            background: white;
            border-bottom: 1px solid var(--gray-200);
        }

        .layer1-breakdown {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 24px;
        }

        .breakdown-card {
            background: var(--gray-50);
            border-radius: 16px;
            padding: 28px;
            border: 1px solid var(--gray-200);
        }

        .breakdown-card h3 {
            font-size: 1.1rem;
            font-weight: 600;
            color: var(--gray-800);
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .breakdown-card .card-tag {
            font-size: 0.7rem;
            background: var(--cyan-100);
            color: var(--cyan-700);
            padding: 4px 10px;
            border-radius: 100px;
            font-weight: 600;
        }

        .breakdown-card p.desc {
            font-size: 0.9rem;
            color: var(--gray-500);
            margin-bottom: 20px;
        }

        .breakdown-list {
            list-style: none;
        }

        .breakdown-list li {
            font-size: 0.9rem;
            color: var(--gray-700);
            padding: 10px 0;
            border-bottom: 1px solid var(--gray-200);
            padding-left: 28px;
            position: relative;
        }

        .breakdown-list li:last-child {
            border-bottom: none;
        }

        .breakdown-list li::before {
            content: "‚Ä¢";
            position: absolute;
            left: 8px;
            color: var(--cyan-500);
            font-weight: 700;
        }

        /* Knowledge Location */
        .knowledge-section {
            background: var(--cyan-50);
        }

        .knowledge-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 24px;
        }

        .knowledge-card {
            background: white;
            border-radius: 16px;
            padding: 28px;
            border: 1px solid var(--cyan-200);
        }

        .knowledge-card h3 {
            font-size: 1rem;
            font-weight: 600;
            margin-bottom: 20px;
            padding-bottom: 12px;
            border-bottom: 2px solid var(--cyan-200);
        }

        .knowledge-card.generic h3 {
            color: var(--cyan-700);
        }

        .knowledge-card.specific h3 {
            color: var(--orange-600);
            border-color: var(--orange-200);
        }

        .knowledge-item {
            background: var(--gray-50);
            border-radius: 10px;
            padding: 14px 16px;
            margin-bottom: 12px;
            font-size: 0.85rem;
            color: var(--gray-600);
            font-family: 'JetBrains Mono', monospace;
            line-height: 1.5;
        }

        .knowledge-item:last-child {
            margin-bottom: 0;
        }

        /* Flow Diagram */
        .flow-section {
            background: white;
            border-bottom: 1px solid var(--gray-200);
        }

        .flow-diagram {
            background: linear-gradient(135deg, var(--gray-800) 0%, var(--gray-900) 100%);
            border-radius: 20px;
            padding: 48px;
            color: white;
            position: relative;
            overflow: hidden;
        }

        .flow-diagram::before {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background:
                radial-gradient(circle at 10% 90%, rgba(6, 182, 212, 0.15) 0%, transparent 40%),
                radial-gradient(circle at 90% 10%, rgba(20, 184, 166, 0.15) 0%, transparent 40%);
            pointer-events: none;
        }

        .flow-row {
            display: flex;
            align-items: center;
            gap: 16px;
            margin-bottom: 28px;
            flex-wrap: wrap;
            position: relative;
            z-index: 1;
        }

        .flow-row:last-child {
            margin-bottom: 0;
        }

        .flow-label {
            width: 140px;
            font-size: 0.75rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.08em;
            color: var(--gray-400);
        }

        .flow-box {
            background: var(--gray-700);
            border-radius: 10px;
            padding: 14px 18px;
            font-size: 0.9rem;
            border: 1px solid var(--gray-600);
        }

        .flow-box.highlight {
            background: var(--cyan-600);
            border-color: var(--cyan-500);
        }

        .flow-box.success {
            background: var(--mint-600);
            border-color: var(--mint-500);
        }

        .flow-arrow {
            color: var(--gray-500);
        }

        .flow-code {
            font-family: 'JetBrains Mono', monospace;
            background: rgba(0, 0, 0, 0.4);
            border-radius: 12px;
            padding: 20px;
            font-size: 0.8rem;
            color: var(--cyan-300);
            flex: 1;
            min-width: 320px;
            border: 1px solid var(--gray-700);
        }

        /* Benefits Section */
        .benefits-section {
            background: linear-gradient(180deg, var(--cyan-50) 0%, white 100%);
        }

        .benefits-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 24px;
        }

        .benefit-card {
            background: white;
            border-radius: 16px;
            padding: 28px;
            border: 1px solid var(--cyan-200);
            box-shadow: 0 4px 20px rgba(6, 182, 212, 0.08);
        }

        .benefit-card .benefit-icon {
            width: 52px;
            height: 52px;
            background: var(--cyan-100);
            border-radius: 14px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            margin-bottom: 20px;
        }

        .benefit-card h3 {
            font-size: 1.05rem;
            font-weight: 600;
            color: var(--gray-800);
            margin-bottom: 10px;
        }

        .benefit-card p {
            font-size: 0.9rem;
            color: var(--gray-500);
            line-height: 1.5;
        }

        .benefit-card .before-after {
            margin-top: 20px;
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 12px;
        }

        .before-after .before,
        .before-after .after {
            padding: 12px 14px;
            border-radius: 10px;
            font-size: 0.8rem;
            line-height: 1.4;
        }

        .before-after .before {
            background: var(--coral-50);
            border: 1px solid var(--coral-200);
            color: var(--coral-700);
        }

        .before-after .after {
            background: var(--mint-50);
            border: 1px solid var(--mint-200);
            color: var(--mint-700);
        }

        .before-after .label {
            font-weight: 600;
            font-size: 0.65rem;
            text-transform: uppercase;
            margin-bottom: 6px;
            display: block;
            letter-spacing: 0.05em;
        }

        /* Work Section */
        .work-section {
            background: linear-gradient(135deg, var(--gray-800) 0%, var(--gray-900) 100%);
            color: white;
            position: relative;
            overflow: hidden;
        }

        .work-section::before {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background:
                radial-gradient(circle at 0% 100%, rgba(6, 182, 212, 0.2) 0%, transparent 50%),
                radial-gradient(circle at 100% 0%, rgba(249, 115, 22, 0.1) 0%, transparent 50%);
            pointer-events: none;
        }

        .work-section .container {
            position: relative;
            z-index: 1;
        }

        .work-section .section-tag {
            background: rgba(6, 182, 212, 0.2);
            color: var(--cyan-300);
        }

        .work-section h2 {
            color: white;
        }

        .work-section .section-desc {
            color: var(--gray-400);
        }

        .work-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 24px;
        }

        .work-card {
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(10px);
            border-radius: 16px;
            padding: 28px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .work-card .work-number {
            width: 36px;
            height: 36px;
            background: var(--gradient-cyan);
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            font-size: 1rem;
            margin-bottom: 18px;
        }

        .work-card h3 {
            font-size: 1.1rem;
            font-weight: 600;
            color: white;
            margin-bottom: 10px;
        }

        .work-card p {
            font-size: 0.9rem;
            color: var(--gray-400);
            margin-bottom: 20px;
        }

        .work-tasks {
            list-style: none;
        }

        .work-tasks li {
            font-size: 0.85rem;
            color: var(--gray-300);
            padding: 10px 0;
            padding-left: 28px;
            position: relative;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .work-tasks li:last-child {
            border-bottom: none;
        }

        .work-tasks li::before {
            content: "[ ]";
            position: absolute;
            left: 0;
            color: var(--cyan-400);
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.75rem;
        }

        /* Metrics Section */
        .metrics-section {
            background: white;
        }

        .metrics-grid {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 20px;
        }

        .metric-card {
            text-align: center;
            padding: 32px 20px;
            background: linear-gradient(135deg, var(--cyan-50) 0%, var(--mint-50) 100%);
            border-radius: 16px;
            border: 1px solid var(--cyan-200);
        }

        .metric-card .metric-value {
            font-size: 2.25rem;
            font-weight: 700;
            color: var(--cyan-600);
            margin-bottom: 6px;
        }

        .metric-card .metric-label {
            font-size: 0.85rem;
            color: var(--gray-500);
        }

        /* Sources Section */
        .sources-section {
            background: var(--gray-50);
            border-top: 1px solid var(--gray-200);
        }

        .sources-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 32px;
        }

        .source-category h3 {
            font-size: 1rem;
            font-weight: 600;
            color: var(--gray-700);
            margin-bottom: 16px;
            padding-bottom: 12px;
            border-bottom: 2px solid var(--cyan-200);
        }

        .source-item {
            margin-bottom: 16px;
        }

        .source-item a {
            color: var(--cyan-600);
            text-decoration: none;
            font-weight: 500;
            font-size: 0.9rem;
        }

        .source-item a:hover {
            text-decoration: underline;
        }

        .source-item p {
            font-size: 0.85rem;
            color: var(--gray-500);
            margin-top: 4px;
        }

        /* Footer */
        footer {
            background: linear-gradient(135deg, var(--gray-800) 0%, var(--gray-900) 100%);
            color: var(--gray-400);
            padding: 40px;
            text-align: center;
            font-size: 0.85rem;
        }

        footer .footer-brand {
            font-weight: 600;
            color: var(--cyan-400);
        }

        /* Responsive */
        @media (max-width: 1024px) {
            .problem-grid,
            .benefits-grid,
            .layer-components {
                grid-template-columns: repeat(2, 1fr);
            }

            .work-grid {
                grid-template-columns: 1fr;
            }

            .metrics-grid {
                grid-template-columns: repeat(3, 1fr);
            }

            .scope-why-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        @media (max-width: 768px) {
            .header h1 {
                font-size: 2rem;
            }

            .header {
                padding: 60px 24px;
            }

            section {
                padding: 60px 0;
            }

            .problem-grid,
            .scope-grid,
            .benefits-grid,
            .layer-components,
            .issues-list,
            .stakeholder-grid,
            .layer1-breakdown,
            .knowledge-grid,
            .sources-grid {
                grid-template-columns: 1fr;
            }

            .metrics-grid {
                grid-template-columns: repeat(2, 1fr);
            }

            .scope-list {
                grid-template-columns: 1fr;
            }

            .flow-row {
                flex-direction: column;
                align-items: flex-start;
            }

            .flow-label {
                width: auto;
                margin-bottom: 8px;
            }

            .current-arch-row {
                flex-direction: column;
            }

            .arch-arrow {
                transform: rotate(90deg);
            }

            .scope-why-grid {
                grid-template-columns: 1fr 1fr;
            }
        }
    </style>
</head>
<body>

<!-- Header -->
<header class="header">
    <div class="header-content">
        <div class="header-badge">OTC PERMIT AUTOMATION</div>
        <h1>Permit Automation System</h1>
        <p class="subtitle">Automating Over-The-Counter permit submissions for contractors and homeowners ‚Äî making routine residential permits as simple as describing the work.</p>
    </div>
</header>

<!-- Section 1: The Problem -->
<section class="problem-section">
    <div class="container">
        <span class="section-tag">Part 1: The Problem</span>
        <h2>What Are We Solving?</h2>
        <p class="section-desc">Getting a permit for routine residential work is unnecessarily complex. These are "routine" permits that should be issued same-day, yet the process often takes hours of navigation, form-filling, and guesswork.</p>

        <div class="problem-grid">
            <div class="problem-card">
                <div class="icon">üåê</div>
                <h3>Portal Fragmentation</h3>
                <p>10,000+ jurisdictions, each with different websites, forms, and processes. No standardization across systems.</p>
            </div>
            <div class="problem-card">
                <div class="icon">üìù</div>
                <h3>Form Complexity</h3>
                <p>Questions use inspector terminology: "parcel number," "zoning overlay," "valuation threshold" confuse users.</p>
            </div>
            <div class="problem-card">
                <div class="icon">üîç</div>
                <h3>Hidden Requirements</h3>
                <p>Missing a single checkbox or document can cause weeks of delays. Users don't know what they don't know.</p>
            </div>
            <div class="problem-card">
                <div class="icon">üîÑ</div>
                <h3>Manual Drudgery</h3>
                <p>Same information (license, address, scope) re-entered across dozens of fields on every application.</p>
            </div>
        </div>
    </div>
</section>

<!-- Section 2: Stakeholders -->
<section class="stakeholder-section">
    <div class="container">
        <span class="section-tag">Who This Hurts</span>
        <h2>Affected Stakeholders</h2>
        <p class="section-desc">The permit complexity problem impacts everyone in the ecosystem ‚Äî from individual contractors to city departments.</p>

        <div class="stakeholder-grid">
            <div class="stakeholder-card">
                <h3><span>üë∑</span> Contractors</h3>
                <ul>
                    <li>Work in multiple cities, must learn 10+ different portals</li>
                    <li>Time spent on permits = money lost on actual work</li>
                    <li>No way to build expertise ‚Äî each city is different</li>
                </ul>
            </div>
            <div class="stakeholder-card">
                <h3><span>üè†</span> Homeowners</h3>
                <ul>
                    <li>First-time permit filers, overwhelmed by jargon</li>
                    <li>Delays in permits mean delays in projects</li>
                    <li>Often give up and work without permits (risky)</li>
                </ul>
            </div>
            <div class="stakeholder-card">
                <h3><span>üèõÔ∏è</span> Cities / Jurisdictions</h3>
                <ul>
                    <li>Handle repetitive queries that could be automated</li>
                    <li>Staff time wasted on simple, routine tasks</li>
                    <li>Inconsistent data quality from confused applicants</li>
                </ul>
            </div>
            <div class="stakeholder-card">
                <h3><span>üìä</span> The Market</h3>
                <ul>
                    <li>~1.4M residential permits annually in the US</li>
                    <li>33-94% are quick-issue eligible (see data below)</li>
                    <li>Massive opportunity for automation</li>
                </ul>
            </div>
        </div>
    </div>
</section>

<!-- Section 3: OTC Data -->
<section class="data-section">
    <div class="container">
        <span class="section-tag">Market Data</span>
        <h2>OTC/Express Permit Statistics</h2>
        <p class="section-desc">Real data from major cities showing the percentage of permits eligible for streamlined processing.</p>

        <div class="data-table-wrapper">
            <table class="data-table">
                <thead>
                    <tr>
                        <th>City</th>
                        <th>Metric</th>
                        <th>Value</th>
                        <th>Sample Size</th>
                        <th>Year</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><strong>San Francisco</strong></td>
                        <td>OTC permits (no full plan review)</td>
                        <td><span class="highlight-value">94%</span></td>
                        <td>1,816 permits</td>
                        <td>Feb 2022</td>
                    </tr>
                    <tr>
                        <td><strong>San Diego</strong></td>
                        <td>Issued same-day or within 1 week</td>
                        <td><span class="highlight-value">58%</span></td>
                        <td>57,000 permits</td>
                        <td>2022</td>
                    </tr>
                    <tr>
                        <td><strong>Chicago</strong></td>
                        <td>Express permits (web-enabled, no review)</td>
                        <td><span class="highlight-value">33%</span></td>
                        <td>All permits</td>
                        <td>2024</td>
                    </tr>
                </tbody>
            </table>
        </div>

        <div class="data-insight">
            <h4>Why the Range?</h4>
            <p><strong>SF's 94%</strong> = all permits not requiring full plan review (broad definition) &nbsp;|&nbsp; <strong>SD's 58%</strong> = permits issued within 1 week (speed-based metric) &nbsp;|&nbsp; <strong>Chicago's 33%</strong> = fully automated web-enabled express only (narrow definition)</p>
            <p style="margin-top: 12px;"><strong>Takeaway:</strong> Conservative estimate ‚Äî ~50%+ of permits are routine enough for streamlined processing.</p>
        </div>
    </div>
</section>

<!-- Section 4: Scope -->
<section class="scope-section">
    <div class="container">
        <span class="section-tag">Part 2: Scope Definition</span>
        <h2>OTC Permits Only</h2>
        <p class="section-desc">We focus exclusively on Over-The-Counter (OTC) permits ‚Äî permits that can be issued same-day without plan review. These represent the majority of residential permit applications.</p>

        <div class="scope-grid">
            <div class="scope-card included">
                <h3>‚úì We Handle (Express/OTC)</h3>
                <ul class="scope-list">
                    <li>Water heater replacement</li>
                    <li>HVAC replacement (same size)</li>
                    <li>Electrical panel (‚â§200A)</li>
                    <li>Re-roofing (same material)</li>
                    <li>Plumbing fixture replacement</li>
                    <li>Window/door (same opening)</li>
                </ul>
            </div>
            <div class="scope-card excluded">
                <h3>‚úó Out of Scope</h3>
                <ul class="scope-list">
                    <li>Room additions</li>
                    <li>New construction</li>
                    <li>Structural modifications</li>
                    <li>ADU construction</li>
                    <li>Commercial projects</li>
                    <li>Work requiring engineering</li>
                </ul>
            </div>
        </div>

        <div class="scope-why">
            <h4>Why This Focus?</h4>
            <div class="scope-why-grid">
                <div class="scope-why-item">
                    <div class="number">50%+</div>
                    <div class="label">High Volume</div>
                </div>
                <div class="scope-why-item">
                    <div class="number">~Same</div>
                    <div class="label">Predictable Logic</div>
                </div>
                <div class="scope-why-item">
                    <div class="number">Low</div>
                    <div class="label">Error Risk</div>
                </div>
                <div class="scope-why-item">
                    <div class="number">Clear</div>
                    <div class="label">Yes/No Boundaries</div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Section 5: Current Architecture Problems -->
<section class="current-problems">
    <div class="container">
        <span class="section-tag">Part 3: Current State</span>
        <h2>What's Broken</h2>
        <p class="section-desc">The existing system has fundamental design flaws that prevent natural conversation flow and consistent user experience.</p>

        <div class="problem-diagram">
            <div class="current-arch">
                <div class="current-arch-row">
                    <div class="arch-box user">
                        <h4>üë§ Customer</h4>
                        <p>Starts conversation</p>
                    </div>
                    <span class="arch-arrow">‚Üí</span>
                    <div class="arch-box chat">
                        <h4>üí¨ Chat Interface</h4>
                        <p>Depends on DAG</p>
                    </div>
                    <span class="arch-arrow">‚Üí</span>
                    <div class="dag-agents">
                        <div class="dag-agent">üèôÔ∏è LA DAG Agent</div>
                        <div class="dag-agent">üèúÔ∏è Phoenix DAG Agent</div>
                        <div class="dag-agent">üåÜ Chicago DAG Agent</div>
                        <div class="dag-agent">‚ùì ... 10,000+ more?</div>
                    </div>
                </div>
            </div>

            <div class="issues-list">
                <div class="issue-item">
                    <div class="issue-icon">üîÄ</div>
                    <div>
                        <h4>Conversation Tied to City DAG</h4>
                        <p>Different cities = different conversation flows. No unified, natural experience. "Tell me about your project" in LA vs "What is the equipment tonnage?" in Phoenix as the first question.</p>
                    </div>
                </div>
                <div class="issue-item">
                    <div class="issue-icon">üë•</div>
                    <div>
                        <h4>Inconsistent Contractor Experience</h4>
                        <p>Same contractor in LA and Phoenix gets two completely different agents. No familiarity, no trust-building over time.</p>
                    </div>
                </div>
                <div class="issue-item">
                    <div class="issue-icon">üö´</div>
                    <div>
                        <h4>No Scope Boundaries</h4>
                        <p>System doesn't communicate what's supported vs. not. User spends 20 minutes answering questions, then told "ADUs not supported."</p>
                    </div>
                </div>
                <div class="issue-item">
                    <div class="issue-icon">‚è≥</div>
                    <div>
                        <h4>Manual City Onboarding Required</h4>
                        <p>To serve a new city: must scrape portal ‚Üí build DAG ‚Üí create agent. No way to handle cities manually during learning phase. Chicken-and-egg problem.</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Section 6: New Architecture Overview -->
<section class="new-arch-section">
    <div class="container">
        <span class="section-tag">Part 4: New Architecture</span>
        <h2>4-Layer Decoupled System</h2>
        <p class="section-desc">A clean separation of concerns that enables consistent experience, manual fallback, and scalable automation.</p>

        <div class="architecture-diagram">
            <div class="layer-stack">

                <!-- Layer 1: Orchestrator -->
                <div class="layer layer-1">
                    <div class="layer-header">
                        <h3><span>üì±</span> Layer 1: Orchestrator + Customer Agent</h3>
                        <span class="layer-tag">ONLINE ‚Ä¢ Per Customer</span>
                    </div>
                    <div class="layer-content">
                        <div class="layer-components">
                            <div class="component">
                                <h4><span class="component-icon">üó£Ô∏è</span> Intent Extractor</h4>
                                <p>Parses natural language ‚Üí structured intent. "I'm replacing my water heater" ‚Üí {work_type: water_heater, action: replacement}</p>
                            </div>
                            <div class="component">
                                <h4><span class="component-icon">üìä</span> State Manager</h4>
                                <p>Tracks known/assumed/missing data. Persists across sessions. City-agnostic until jurisdiction resolved.</p>
                            </div>
                            <div class="component">
                                <h4><span class="component-icon">‚öôÔ∏è</span> DAG Executor</h4>
                                <p>Runs decision logic: Is permit required? Express or standard? Returns decision + next actions.</p>
                            </div>
                        </div>
                        <div class="insight-box cyan">
                            <strong>Key Insight:</strong> Customer always talks to the SAME agent. City-specific questions come from the city config, not a different agent.
                        </div>
                    </div>
                </div>

                <div class="layer-connection">
                    <div class="connection-arrow">
                        <span>loads city config</span>
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M12 5v14M5 12l7 7 7-7"/>
                        </svg>
                    </div>
                </div>

                <!-- City Config DB -->
                <div class="layer layer-db">
                    <div class="layer-header">
                        <h3><span>üóÑÔ∏è</span> City Config Database</h3>
                        <span class="layer-tag">Permit Database</span>
                    </div>
                    <div class="layer-content">
                        <div class="layer-components">
                            <div class="component">
                                <h4><span class="component-icon">üå≥</span> City-Specific DAGs</h4>
                                <p>Decision trees per city. Same tonnage? Same location? Same fuel? ‚Üí Express vs Standard</p>
                            </div>
                            <div class="component">
                                <h4><span class="component-icon">üéØ</span> CSS Selectors</h4>
                                <p>Exact form field selectors for each portal. #propertyAddress, #acTonnage, etc.</p>
                            </div>
                            <div class="component">
                                <h4><span class="component-icon">üîó</span> Field Mappings</h4>
                                <p>canonical.address ‚Üí city_form.property_address. Value transformations and enums.</p>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="layer-connection">
                    <div class="connection-arrow">
                        <span>generated by</span>
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M12 19V5M5 12l7-7 7 7"/>
                        </svg>
                    </div>
                </div>

                <!-- Layer 2: City Intelligence -->
                <div class="layer layer-2">
                    <div class="layer-header">
                        <h3><span>üîç</span> Layer 2: City Intelligence Agent</h3>
                        <span class="layer-tag">OFFLINE ‚Ä¢ Runs Async</span>
                    </div>
                    <div class="layer-content">
                        <div class="layer-components">
                            <div class="component">
                                <h4><span class="component-icon">üï∑Ô∏è</span> Portal Scraper</h4>
                                <p>Navigates city permit portals. Captures page structure, forms, fields. Handles auth flows.</p>
                            </div>
                            <div class="component">
                                <h4><span class="component-icon">üß™</span> Mock Run Engine</h4>
                                <p>Performs test submissions with dummy data. Discovers conditional fields. Maps complete form flow.</p>
                            </div>
                            <div class="component">
                                <h4><span class="component-icon">üß†</span> Structure Analyzer</h4>
                                <p>Identifies field types, validation rules, required vs optional. Generates selectors and DAGs.</p>
                            </div>
                        </div>
                        <div class="insight-box orange">
                            <strong>What "OFFLINE" means:</strong> This layer runs asynchronously ‚Äî on a schedule or trigger ‚Äî NOT when a customer makes a request. Customers are served from pre-computed configs.
                        </div>
                    </div>
                </div>

                <div class="layer-connection">
                    <div class="connection-arrow">
                        <span>provides selectors to</span>
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M12 5v14M5 12l7 7 7-7"/>
                        </svg>
                    </div>
                </div>

                <!-- Layer 3: Form Filler -->
                <div class="layer layer-3">
                    <div class="layer-header">
                        <h3><span>‚ö°</span> Layer 3: Form Filler</h3>
                        <span class="layer-tag">EXECUTION ‚Ä¢ Pure Automation</span>
                    </div>
                    <div class="layer-content">
                        <div class="layer-components">
                            <div class="component">
                                <h4><span class="component-icon">üîÑ</span> Value Resolver</h4>
                                <p>Takes canonical data, maps to city-specific formats. "3 tons" ‚Üí select option "3-4 tons"</p>
                            </div>
                            <div class="component">
                                <h4><span class="component-icon">üé≠</span> Playwright Executor</h4>
                                <p>Loads portal, authenticates, fills fields using selectors. Handles dynamic form behavior.</p>
                            </div>
                            <div class="component">
                                <h4><span class="component-icon">‚úÖ</span> Submission Validator</h4>
                                <p>Captures confirmation page/number. Validates submission success. Stores receipt data.</p>
                            </div>
                        </div>
                        <div class="insight-box mint">
                            <strong>Design Principle:</strong> This layer knows NOTHING about permits. Only field selectors, values, and how to submit. Portal changes only affect this layer.
                        </div>
                    </div>
                </div>

            </div>
        </div>
    </div>
</section>

<!-- Section 7: Layer 1 Detail -->
<section class="layer1-detail-section">
    <div class="container">
        <span class="section-tag">Layer 1 Deep Dive</span>
        <h2>Orchestrator + Customer Agent</h2>
        <p class="section-desc">Layer 1 has two distinct responsibilities ‚Äî generic conversation handling and city-specific orchestration.</p>

        <div class="layer1-breakdown">
            <div class="breakdown-card">
                <h3>Conversational Agent <span class="card-tag">Always Active</span></h3>
                <p class="desc">Handles generic queries that DON'T require city-specific logic:</p>
                <ul class="breakdown-list">
                    <li>"How much will this cost?" ‚Üí Fee estimation / ranges</li>
                    <li>"How long will it take?" ‚Üí Timeline expectations</li>
                    <li>"What's the process?" ‚Üí General permit workflow</li>
                    <li>"What's allowed/not allowed?" ‚Üí Scope boundaries</li>
                    <li>"Who am I?" ‚Üí Contractor profile, license status</li>
                    <li>"What documents do I need?" ‚Üí Common requirements</li>
                </ul>
            </div>
            <div class="breakdown-card">
                <h3>Orchestrator <span class="card-tag">Triggered When Ready</span></h3>
                <p class="desc">Once we have enough context (address, work type):</p>
                <ul class="breakdown-list">
                    <li>Resolve jurisdiction from address</li>
                    <li>Load city-specific DAG from database</li>
                    <li>Execute DAG to determine: Express? Standard? Not supported?</li>
                    <li>Generate city-specific follow-up questions from DAG nodes</li>
                </ul>
            </div>
        </div>
    </div>
</section>

<!-- Section 8: Knowledge Location -->
<section class="knowledge-section">
    <div class="container">
        <span class="section-tag">Knowledge Architecture</span>
        <h2>Where Knowledge Lives</h2>
        <p class="section-desc">Clear separation between generic permit knowledge and city-specific rules.</p>

        <div class="knowledge-grid">
            <div class="knowledge-card generic">
                <h3>Generic Knowledge (Layer 1)</h3>
                <div class="knowledge-item">"Water heater permits typically cost $50-200"</div>
                <div class="knowledge-item">"Express permits usually issued same-day"</div>
                <div class="knowledge-item">"You'll need contractor license for HVAC work"</div>
                <div class="knowledge-item">"Inspections happen after installation"</div>
            </div>
            <div class="knowledge-card specific">
                <h3>City-Specific (Config Database)</h3>
                <div class="knowledge-item">"LA requires same-location for express eligibility"</div>
                <div class="knowledge-item">"Phoenix asks for tonnage on HVAC replacements"</div>
                <div class="knowledge-item">"Chicago uses dropdown for fuel type, not radio"</div>
                <div class="knowledge-item">"SD requires APN lookup before submission"</div>
            </div>
        </div>
    </div>
</section>

<!-- Section 9: Data Flow -->
<section class="flow-section">
    <div class="container">
        <span class="section-tag">End-to-End Flow</span>
        <h2>From Customer to Submission</h2>
        <p class="section-desc">How a permit request flows through the system layers.</p>

        <div class="flow-diagram">
            <div class="flow-row">
                <div class="flow-label">Customer Says</div>
                <div class="flow-box highlight">"I need a permit to replace my AC at 123 Main St, Los Angeles"</div>
            </div>

            <div class="flow-row">
                <div class="flow-label">Layer 1 Extracts</div>
                <div class="flow-code">{
  "work_type": "HVAC",
  "action": "replacement",
  "address": "123 Main St, Los Angeles",
  "jurisdiction": "la_city"  // resolved from address
}</div>
            </div>

            <div class="flow-row">
                <div class="flow-label">DAG Decides</div>
                <div class="flow-box">Load LA City DAG</div>
                <span class="flow-arrow">‚Üí</span>
                <div class="flow-box">Same size? ‚úì</div>
                <span class="flow-arrow">‚Üí</span>
                <div class="flow-box">Same location? ‚úì</div>
                <span class="flow-arrow">‚Üí</span>
                <div class="flow-box">Same fuel? ‚úì</div>
                <span class="flow-arrow">‚Üí</span>
                <div class="flow-box success">EXPRESS PERMIT</div>
            </div>

            <div class="flow-row">
                <div class="flow-label">Canonical Data</div>
                <div class="flow-code">{
  "property": { "address": "123 Main St", "apn": "5678-901-234" },
  "contractor": { "license": "CA-12345", "name": "ABC HVAC" },
  "project": { "tonnage": "3", "fuel": "electric", "location": "same" }
}</div>
            </div>

            <div class="flow-row">
                <div class="flow-label">Layer 3 Fills</div>
                <div class="flow-box">#propertyAddress = "123 MAIN ST"</div>
                <span class="flow-arrow">‚Üí</span>
                <div class="flow-box">#acTonnage = "3-4 tons"</div>
                <span class="flow-arrow">‚Üí</span>
                <div class="flow-box">#submit.click()</div>
                <span class="flow-arrow">‚Üí</span>
                <div class="flow-box success">Permit #LA-2024-78901</div>
            </div>
        </div>
    </div>
</section>

<!-- Section 10: Benefits -->
<section class="benefits-section">
    <div class="container">
        <span class="section-tag">Why This Works</span>
        <h2>Architecture Benefits</h2>
        <p class="section-desc">How the new design solves each problem with the current system.</p>

        <div class="benefits-grid">
            <div class="benefit-card">
                <div class="benefit-icon">üéØ</div>
                <h3>Consistent Experience</h3>
                <p>Every contractor talks to the same agent. City-specific questions come from config, not different agents.</p>
                <div class="before-after">
                    <div class="before">
                        <span class="label">Before</span>
                        Different agent per city
                    </div>
                    <div class="after">
                        <span class="label">After</span>
                        One agent, config-driven
                    </div>
                </div>
            </div>

            <div class="benefit-card">
                <div class="benefit-icon">üë§</div>
                <h3>Human-Assisted Fallback</h3>
                <p>New cities don't need scraping first. Human can manually fill form while system records mappings.</p>
                <div class="before-after">
                    <div class="before">
                        <span class="label">Before</span>
                        Must scrape before serving
                    </div>
                    <div class="after">
                        <span class="label">After</span>
                        Serve now, automate later
                    </div>
                </div>
            </div>

            <div class="benefit-card">
                <div class="benefit-icon">üö´</div>
                <h3>Clear Boundaries</h3>
                <p>DAG explicitly returns: express permit, standard permit, or needs human review. No ambiguity.</p>
                <div class="before-after">
                    <div class="before">
                        <span class="label">Before</span>
                        Users hit dead ends
                    </div>
                    <div class="after">
                        <span class="label">After</span>
                        Clear guidance always
                    </div>
                </div>
            </div>

            <div class="benefit-card">
                <div class="benefit-icon">üîÑ</div>
                <h3>Isolated Changes</h3>
                <p>Portal UI changes only affect Layer 2/3. Business logic changes only affect Layer 1. No cascade failures.</p>
                <div class="before-after">
                    <div class="before">
                        <span class="label">Before</span>
                        Selector break = full outage
                    </div>
                    <div class="after">
                        <span class="label">After</span>
                        Re-scrape, auto-update
                    </div>
                </div>
            </div>

            <div class="benefit-card">
                <div class="benefit-icon">üìä</div>
                <h3>Auditable Decisions</h3>
                <p>DAGs are explicit, testable, version-controlled. Every permit decision can be explained and replayed.</p>
                <div class="before-after">
                    <div class="before">
                        <span class="label">Before</span>
                        LLM black box decisions
                    </div>
                    <div class="after">
                        <span class="label">After</span>
                        Explicit DAG paths
                    </div>
                </div>
            </div>

            <div class="benefit-card">
                <div class="benefit-icon">‚ö°</div>
                <h3>Smart Defaults</h3>
                <p>Assume common case (SFR, &lt;$100K, owner-occupied). Show assumptions transparently. Customer confirms or corrects.</p>
                <div class="before-after">
                    <div class="before">
                        <span class="label">Before</span>
                        Ask every question
                    </div>
                    <div class="after">
                        <span class="label">After</span>
                        Assume + confirm
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Section 11: Work To Be Done -->
<section class="work-section">
    <div class="container">
        <span class="section-tag">Implementation Roadmap</span>
        <h2>Key Work To Be Done</h2>
        <p class="section-desc">The implementation path to bring this architecture to life.</p>

        <div class="work-grid">
            <div class="work-card">
                <div class="work-number">1</div>
                <h3>Canonical Data Model</h3>
                <p>Define the universal schema for all permit data that works across jurisdictions.</p>
                <ul class="work-tasks">
                    <li>Define property schema (address, APN, zoning, lot info)</li>
                    <li>Define contractor schema (license, contact, insurance)</li>
                    <li>Define project schema per work type (HVAC, electrical, plumbing)</li>
                    <li>Define common fields that apply to all permit types</li>
                </ul>
            </div>

            <div class="work-card">
                <div class="work-number">2</div>
                <h3>Address Resolution Pipeline</h3>
                <p>Robust address ‚Üí jurisdiction ‚Üí property data resolution.</p>
                <ul class="work-tasks">
                    <li>Address standardization and parsing</li>
                    <li>Jurisdiction lookup from address</li>
                    <li>APN/parcel number resolution</li>
                    <li>Zoning and special district lookup (flood, historic, hillside)</li>
                </ul>
            </div>

            <div class="work-card">
                <div class="work-number">3</div>
                <h3>First City Implementation (LA)</h3>
                <p>Build complete pipeline for Los Angeles as proof of concept.</p>
                <ul class="work-tasks">
                    <li>Scrape LADBS portal structure</li>
                    <li>Build LA-specific DAGs for HVAC, water heater, electrical</li>
                    <li>Map all form fields to canonical schema</li>
                    <li>End-to-end test with real submissions</li>
                </ul>
            </div>

            <div class="work-card">
                <div class="work-number">4</div>
                <h3>DAG Execution Engine</h3>
                <p>Runtime for executing city-specific decision trees.</p>
                <ul class="work-tasks">
                    <li>DAG schema definition (YAML/JSON)</li>
                    <li>Execution engine with state tracking</li>
                    <li>Question generation from DAG nodes</li>
                    <li>Decision logging and audit trail</li>
                </ul>
            </div>

            <div class="work-card">
                <div class="work-number">5</div>
                <h3>Playwright Form Filler</h3>
                <p>Robust browser automation for form submission.</p>
                <ul class="work-tasks">
                    <li>Selector-driven field filling</li>
                    <li>Dynamic form handling (conditional fields, AJAX)</li>
                    <li>Authentication flow support</li>
                    <li>Confirmation capture and validation</li>
                </ul>
            </div>

            <div class="work-card">
                <div class="work-number">6</div>
                <h3>Human-Assisted Mode</h3>
                <p>Fallback system for new/unsupported jurisdictions.</p>
                <ul class="work-tasks">
                    <li>Collect all data with generic template</li>
                    <li>Package data + portal link for human</li>
                    <li>Recording interface for field mappings</li>
                    <li>Automatic promotion to automated mode</li>
                </ul>
            </div>
        </div>
    </div>
</section>

<!-- Section 12: Success Metrics -->
<section class="metrics-section">
    <div class="container">
        <span class="section-tag">Measuring Success</span>
        <h2>Success Metrics</h2>
        <p class="section-desc">How we measure success of the permit automation system.</p>

        <div class="metrics-grid">
            <div class="metric-card">
                <div class="metric-value">&gt;95%</div>
                <div class="metric-label">Submission Success Rate</div>
            </div>
            <div class="metric-card">
                <div class="metric-value">&lt;5</div>
                <div class="metric-label">Questions per Submission</div>
            </div>
            <div class="metric-card">
                <div class="metric-value">&lt;5min</div>
                <div class="metric-label">Start to Submission</div>
            </div>
            <div class="metric-card">
                <div class="metric-value">&lt;5%</div>
                <div class="metric-label">Human Escalation Rate</div>
            </div>
            <div class="metric-card">
                <div class="metric-value">&lt;1%</div>
                <div class="metric-label">Customer-Reported Errors</div>
            </div>
        </div>
    </div>
</section>

<!-- Section 13: Sources -->
<section class="sources-section">
    <div class="container">
        <span class="section-tag">References</span>
        <h2>Sources</h2>
        <p class="section-desc">Data sources and citations for statistics used in this presentation.</p>

        <div class="sources-grid">
            <div class="source-category">
                <h3>OTC/Express Permit Data</h3>
                <div class="source-item">
                    <a href="https://www.sf.gov/news--28-decrease-processing-time-over-counter-building-permits-speed-construction" target="_blank">San Francisco OTC Statistics</a>
                    <p>94% of permits (1,716/1,816) were OTC in Feb 2022</p>
                </div>
                <div class="source-item">
                    <a href="https://www.sandiego.gov/development-services/permits-inspections/dashboard" target="_blank">San Diego Permit Dashboard</a>
                    <p>58% of 57,000 permits issued same-day or within 1 week (2022)</p>
                </div>
                <div class="source-item">
                    <a href="https://www.chicago.gov/city/en/depts/bldgs/provdrs/permits/svcs/express-permits.html" target="_blank">Chicago Express Permits</a>
                    <p>Express permits = 1/3 of all building permits (2024)</p>
                </div>
            </div>
            <div class="source-category">
                <h3>Market & Volume Data</h3>
                <div class="source-item">
                    <a href="https://www.census.gov/construction/bps/" target="_blank">US Census Bureau</a>
                    <p>~1.4M residential permits annually</p>
                </div>
                <div class="source-item">
                    <a href="https://www.homeadvisor.com/cost/architects-and-engineers/get-a-building-permit/" target="_blank">HomeAdvisor</a>
                    <p>Permit fee ranges: $50-$8,500 depending on project</p>
                </div>
            </div>
        </div>
    </div>
</section>

<footer>
    <span class="footer-brand">Permit Automation System</span> &nbsp;‚Ä¢&nbsp; OTC Express Permits &nbsp;‚Ä¢&nbsp; Scalable to 10,000+ Jurisdictions
</footer>

</body>
</html>
